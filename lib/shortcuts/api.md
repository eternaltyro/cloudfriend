<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [LambdaOptions][1]
    -   [Properties][2]
-   [Lambda][3]
    -   [Parameters][4]
    -   [Properties][5]
    -   [Examples][6]
    -   [Resources][7]
-   [ScheduledLambdaOptions][8]
    -   [Properties][9]
-   [ScheduledLambda][10]
    -   [Parameters][11]
    -   [Examples][12]
-   [QueueLambdaOptions][13]
    -   [Properties][14]
-   [QueueLambda][15]
    -   [Parameters][16]
    -   [Examples][17]
-   [StreamLambda][18]
    -   [Parameters][19]
    -   [Examples][20]
-   [StreamLambdaOptions][21]
    -   [Properties][22]
-   [ServiceRole][23]
    -   [Parameters][24]
    -   [Properties][25]
    -   [Examples][26]
-   [Policies][27]
-   [Queue][28]
    -   [Parameters][29]
    -   [Properties][30]
    -   [Examples][31]
-   [hookshot.Passthrough][32]
    -   [Properties][33]
    -   [Examples][34]
-   [Resources][35]
-   [hookshot.Github][36]
    -   [Properties][37]
    -   [Examples][38]
-   [Metadata][39]
-   [Parameters][40]
-   [Mappings][41]
-   [Conditions][42]
-   [Resources][43]
-   [Outputs][44]

## LambdaOptions

Type: [object][45]

### Properties

-   `LogicalName` **[string][46]** the logical name of the Lambda function
    within the CloudFormation template. This is used to construct the logical
    names of the other resources, as well as the Lambda function's name.
-   `Code` **[object][45]** See [AWS documentation][47]
-   `DeadLetterConfig` **[object][45]?** See [AWS documentation][48]
-   `Description` **([string][46] \| [object][45])?** See [AWS documentation][49]
-   `Environment` **[object][45]?** See [AWS documentation][50]
-   `FunctionName` **([string][46] \| [object][45])?** See [AWS documentation][51]
-   `Handler` **[string][46]?** See [AWS documentation][52]
-   `KmsKeyArn` **[string][46]?** See [AWS documentation][53]
-   `MemorySize` **[Number][54]?** See [AWS documentation][55]
-   `ReservedConcurrentExecutions` **[Number][54]?** See [AWS documentation][56]
-   `Runtime` **[string][46]?** See [AWS documentation][57]
-   `Tags` **[Array][58]&lt;[object][45]>?** See [AWS documentation][59]
-   `Timeout` **[Number][54]?** See [AWS documentation][60]
-   `TracingConfig` **[object][45]?** See [AWS documentation][61]
-   `VpcConfig` **[object][45]?** See [AWS documentation][62]
-   `Condition` **[string][46]?** if there is a Condition defined in the template
    that should control whether or not to create this Lambda function, specify
    the name of the condition here. See [AWS documentation][63]
-   `DependsOn` **[string][46]?** Specify a stack resource dependency
    to this Lambda function. See [AWS documentation][64]
-   `Statement` **[Array][58]&lt;[object][45]>?** an array of policy statements
    defining the permissions that your Lambda function needs in order to execute.
-   `AlarmName` **[string][46]?** See [AWS documentation][65]
-   `AlarmDescription` **[string][46]?** See [AWS documentation][66]
-   `AlarmActions` **[Array][58]&lt;[string][46]>?** See [AWS documentation][67]
-   `Period` **[Number][54]?** See [AWS documentation][68]
-   `EvaluationPeriods` **[Number][54]?** See [AWS documentation][69]
-   `Statistic` **[string][46]?** See [AWS documentation][70]
-   `Threshold` **[Number][54]?** See [AWS documentation][71]
-   `ComparisonOperator` **[string][46]?** See [AWS documentation][72]
-   `TreatMissingData` **[string][46]?** See [AWS documentation][73]
-   `EvaluateLowSampleCountPercentile` **[string][46]?** See [AWS documentation][74]
-   `ExtendedStatistic` **[string][46]?** See [AWS documentation][75]
-   `OKActions` **[Array][58]&lt;[string][46]>?** See [AWS documentation][76]

## Lambda

Baseline CloudFormation resources involved in a Lambda Function. Includes a
LogGroup, a Role, an Alarm on function errors, and the Lambda Function itself.

### Parameters

-   `options` **[LambdaOptions][77]** configuration options for the Lambda function, its
    IAM role, and the error Alarm.

### Properties

-   `Resources` **[Object][45]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.Lambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  }
});

module.exports = cf.merge(myTemplate, lambda);
```

### Resources

Type: [object][45]

## ScheduledLambdaOptions

Type: [object][45]

### Properties

-   `ScheduleExpression` **[string][46]** See [AWS documentation][78]
-   `State` **[string][46]?** See [AWS documentation][79]

## ScheduledLambda

**Extends Lambda**

A Lambda function that executes on a schedule. Includes a LogGroup, a Role,
an Alarm on function errors, a CloudWatch Event Rule, and a Lambda permission.

### Parameters

-   `options`  

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.ScheduledLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  ScheduleExpression: 'rate(1 hour)'
});

module.exports = cf.merge(myTemplate, lambda);
```

## QueueLambdaOptions

Type: [object][45]

### Properties

-   `Enabled` **[boolean][80]?** 
-   `BatchSize` **[number][54]?** See [AWS documentation][81]
-   `EventSourceArn` **[string][46]** See [AWS documentation][82]
-   `ReservedConcurrentExecutions` **[number][54]** See [AWS documentation][56]

## QueueLambda

**Extends Lambda**

A Lambda function that executes in response to messages in an SQS queue.
Includes a LogGroup, a Role, an Alarm on function errors, and an event source
mapping.

### Parameters

-   `options`  

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.QueueLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyQueue', 'Arn'),
  ReservedConcurrentExecutions: 30
});

module.exports = cf.merge(myTemplate, lambda);
```

## StreamLambda

**Extends Lambda**

A Lambda function that executes in response to events in a DynamoDB or Kinesis
stream. Includes a LogGroup, a Role, an Alarm on function errors, and an event
source mapping.

### Parameters

-   `options`  

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const lambda = new cf.shortcuts.StreamLambda({
  LogicalName: 'MyLambda',
  Code: {
    S3Bucket: 'my-code-bucket',
    S3Key: 'path/to/code.zip'
  },
  EventSourceArn: cf.getAtt('MyStream', 'Arn')
});

module.exports = cf.merge(myTemplate, lambda);
```

## StreamLambdaOptions

Type: [object][45]

### Properties

-   `EventSourceArn` **[string][46]** See [AWS documentation][82]
-   `BatchSize` **[number][54]?** See [AWS documentation][81]
-   `Enabled` **[boolean][80]?** See [AWS documentation][83]
-   `StartingPosition` **[string][46]?** See [AWS documentation][84]

## ServiceRole

Create an IAM role that will be assumed by an AWS service, e.g. Lambda or ECS.

### Parameters

-   `options` **[Object][45]** configuration options for the IAM role.

### Properties

-   `Resources` **[Object][45]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const role = new cf.shortcuts.ServiceRole({
  LogicalName: 'MyRole',
  Service: 'lambda',
  Statement: [
    {
      Effect: 'Allow',
      Action: 's3:GetObject',
      Resource: 'arn:aws:s3:::my-bucket/my/data.tar.gz'
    }
  ]
});

module.exports = cf.merge(myTemplate, role);
```

## Policies

Type: [object][45]?

## Queue

Creates an SQS queue that can be fed messages through an SNS topic. Creates
an SQS queue, SNS topic, dead-letter queue and policy allowing SNS events
to publish messages to the queue.

### Parameters

-   `options` **[Object][45]** configuration options for the SQS queue and related
    resources.

### Properties

-   `Resources` **[Object][45]** the CloudFormation resources created by this shortcut.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = { ... };

const queue = new cf.shortcuts.Queue({
  LogicalName: 'MyQueue'
});

module.exports = cf.merge(myTemplate, queue);
```

## hookshot.Passthrough

The hookshot.Passthrough class defines resources that set up a single API Gateway
endpoint that responds to POST and OPTIONS requests. You are expected to
provide a Lambda function that will receive the request, and return some
response to the caller.

Note that in this case, your Lambda function will receive every HTTP POST
request that arrives at the API Gateway URL that hookshot helped you create.
You are responsible for any authentication that should be performed against
incoming requests.

Your Lambda function will receive an event object which includes the request
method, headers, and body, as well as other data specific to the API Gateway
endpoint created by hookshot. See [AWS documentation here][85]
for a full description of the incoming data.

In order to work properly, **your lambda function must return a data object
matching in a specific JSON format**. Again, see [AWS documentation for a full description][86].

Your API Gateway endpoint will be set up to allow cross-origin resource
sharing (CORS) required by requests from any web page. Preflight `OPTIONS`
requests will receive a `200` response with CORS headers. And the response
you return from your Lambda function will be modified to include CORS headers.

### Properties

-   `Resources` **[Object][45]** the CloudFormation resources created by this shortcut.
-   `Outputs` **[Object][45]** the CloudFormation outputs created by this
    shortcut. This includes the URL for the API Gateway endpoint, and a random
    string that can be used as a shared secret if you so desire.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = {
  ...
  Resources: {
    MyLambdaFunction: {
      Type: 'AWS::Lambda::Function',
      Properties: { ... }
    }
  }
};

const webhook = new cf.shortcuts.hookshot.Passthrough({
  Prefix: 'Webhook',
  PassthroughTo: 'MyLambdaFunction'
});

module.exports = cf.merge(myTemplate, lambda);
```

## Resources

Type: [object][45]

## hookshot.Github

The hookshot.Github class defines resources that set up a single API Gateway
endpoint that is designed responds to POST requests sent from Github in
response to various Github events. The hookshot system will use a shared
secret to validate that the incoming payload did in fact originate from Github,
before sending the event payload to your Lambda function for further
processing. Any requests that did not come from Github or were not properly
signed using your secret key are rejected, and will never make it to your
Lambda function.

### Properties

-   `Resources` **[Object][45]** the CloudFormation resources created by this shortcut.
-   `Outputs` **[Object][45]** the CloudFormation outputs created by this
    shortcut. This includes the URL for the API Gateway endpoint, and a secret
    string. Use these two values to configure Github to send webhooks to your
    API Gateway endpoint.

### Examples

```javascript
const cf = require('@mapbox/cloudfriend');

const myTemplate = {
  ...
  Resources: {
    MyLambdaFunction: {
      Type: 'AWS::Lambda::Function',
      Properties: { ... }
    }
  }
};

const webhook = new cf.shortcuts.hookshot.Github({
  Prefix: 'Webhook',
  PassthroughTo: 'MyLambdaFunction'
});

module.exports = cf.merge(myTemplate, lambda);
```

## Metadata

Type: [object][45]

## Parameters

Type: [object][45]

## Mappings

Type: [object][45]

## Conditions

Type: [object][45]

## Resources

Type: [object][45]

## Outputs

Type: [object][45]

[1]: #lambdaoptions

[2]: #properties

[3]: #lambda

[4]: #parameters

[5]: #properties-1

[6]: #examples

[7]: #resources

[8]: #scheduledlambdaoptions

[9]: #properties-2

[10]: #scheduledlambda

[11]: #parameters-1

[12]: #examples-1

[13]: #queuelambdaoptions

[14]: #properties-3

[15]: #queuelambda

[16]: #parameters-2

[17]: #examples-2

[18]: #streamlambda

[19]: #parameters-3

[20]: #examples-3

[21]: #streamlambdaoptions

[22]: #properties-4

[23]: #servicerole

[24]: #parameters-4

[25]: #properties-5

[26]: #examples-4

[27]: #policies

[28]: #queue

[29]: #parameters-5

[30]: #properties-6

[31]: #examples-5

[32]: #hookshotpassthrough

[33]: #properties-7

[34]: #examples-6

[35]: #resources-1

[36]: #hookshotgithub

[37]: #properties-8

[38]: #examples-7

[39]: #metadata

[40]: #parameters-6

[41]: #mappings

[42]: #conditions

[43]: #resources-2

[44]: #outputs

[45]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[46]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[47]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html

[48]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-deadletterconfig

[49]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-description

[50]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-environment

[51]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-functionname

[52]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-handler

[53]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-kmskeyarn

[54]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[55]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-memorysize

[56]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-reservedconcurrentexecutions

[57]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-runtime

[58]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[59]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tags

[60]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-timeout

[61]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-tracingconfig

[62]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html#cfn-lambda-function-vpcconfig

[63]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/conditions-section-structure.html

[64]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html

[65]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmname

[66]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmdescription

[67]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-alarmactions

[68]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-period

[69]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluationperiods

[70]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-statistic

[71]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-threshold

[72]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-comparisonoperator

[73]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-treatmissingdata

[74]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-evaluatelowsamplecountpercentile

[75]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-extendedstatistic

[76]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-okactions

[77]: #lambdaoptions

[78]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-scheduleexpression

[79]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html#cfn-events-rule-state

[80]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[81]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-batchsize

[82]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-eventsourcearn

[83]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-enabled

[84]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-startingposition

[85]: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-input-format

[86]: https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-output-format
